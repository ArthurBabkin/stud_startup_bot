from aiogram import Router
from aiogram.filters import CommandStart
from aiogram.types import Message
from app.services import db_service
from app.services.db_service import ASK_LIMIT, PDF_LIMIT, LIMIT_RESET_DAYS

router = Router()

@router.message(CommandStart())  # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã /start
async def cmd_start(message: Message):
    user = message.from_user
    db_service.add_user(
        user_id=user.id,
        username=user.username,
        first_name=user.first_name,
        last_name=user.last_name,
    )
    # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    await message.answer("<b>–ü—Ä–∏–≤–µ—Ç! üëã</b>\n"
            "–Ø ‚Äî —Ç–≤–æ–π –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫. –ü–æ–º–æ–≥—É —Ç–µ–±–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∏ —É–ª—É—á—à–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≥—Ä–∞–Ω—Ç "
            "¬´–°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏–π –°—Ç–∞—Ä—Ç–∞–ø¬ª –æ—Ç –§–°–ò.\n\n"
        
            "<b>‚úÖ –Ø —É–º–µ—é –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∑–∞—è–≤–∫–∏:</b>\n"
            "‚úîÔ∏è –ü—Ä–æ–≤–µ—Ä—é –∑–∞—è–≤–∫—É –Ω–∞ –æ—à–∏–±–∫–∏ –∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è\n"
            "‚úîÔ∏è –î–∞–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é —Ç–µ–∫—Å—Ç–∞\n"
            "‚úîÔ∏è –ü–æ–¥—Å–∫–∞–∂—É, –∫–∞–∫ –ø–æ–≤—ã—Å–∏—Ç—å —à–∞–Ω—Å—ã –Ω–∞ –æ–¥–æ–±—Ä–µ–Ω–∏–µ\n\n"
        
            "<b>‚úÖ –Ø —É–º–µ—é –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –≥—Ä–∞–Ω—Ç—É:</b>\n"
            "‚úîÔ∏è –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã\n"
            "‚úîÔ∏è –í–æ–ø—Ä–æ—Å—ã –ø–æ –∑–∞—è–≤–∫–µ\n\n"
        
            "<i>–í—ã–±–µ—Ä–∏ –Ω—É–∂–Ω—É—é –¥–ª—è —Ç–µ–±—è –æ–ø—Ü–∏—é –Ω–∏–∂–µ:</i>\n"
            f"(–±–µ—Å–ø–ª–∞—Ç–Ω–æ: {ASK_LIMIT} –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ {PDF_LIMIT} –ø—Ä–æ–≤–µ—Ä–∫–∏ PDF –∫–∞–∂–¥—ã–µ {LIMIT_RESET_DAYS} –¥–Ω—è)\n\n"
        
            "<b>üìã –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥:</b>\n"
            "/start ‚Äî –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞\n"
            "/help ‚Äî –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥\n"
            "/ask ‚Äî –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å\n"
            "/check ‚Äî –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞—è–≤–∫—É –≤ PDF\n",
            parse_mode="HTML"
        )


